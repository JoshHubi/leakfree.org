<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from leakfree.org/t/custom-audio-not-playing-in-workshop-ugc/15329 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 18 Jan 2021 11:01:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Custom audio not playing in Workshop UGC - In-game Issues - Leakfree</title>
    <meta name="description" content="Sound mounting via the workshop appears to be broken. When mounting the content as a folder directory using gameinfo.txt, or using a vpk and mounting with gameinfo.txt, the audio plays fine, but the same vpk mounted via &amp;hellip;">
    <meta name="generator" content="Discourse 2.6.0.beta5 - https://github.com/discourse/discourse version b9fb1cebcd8c8dc34800692fd6f8b72c47b51ad3">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1b69109125d4946f223f71d45e038e4e8e7410f9_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/1/1b69109125d4946f223f71d45e038e4e8e7410f9_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="15329.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://leakfree.org","potentialAction":{"@type":"SearchAction","target":"https://leakfree.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Leakfree Search">

      <link href="../../stylesheets/desktop_8_78a84313b1758221d1fdcffd1499666af5b5fdab.css_%3b%20filename_%3dUTF-8%27%27desktop_8_78a84313b1758221d1fdcffd1499666af5b5fdabd733.css?__ws=leakfree.org" media="all" rel="stylesheet" data-target="desktop" data-theme-id="11"/>
      <link href="../../stylesheets/desktop_theme_11_bcef0414ba3b66792586d18ce571f192263e1732.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_11_bcef0414ba3b66792586d18ce571f192263e1732d733.css?__ws=leakfree.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="11"/>
    <script data-ad-client="ca-pub-2079330348735278" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Custom audio not playing in Workshop UGC&#39;" href="15329.rss" />
    <meta property="og:site_name" content="Leakfree" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://leakfree.org/uploads/default/original/2X/1/1b69109125d4946f223f71d45e038e4e8e7410f9.png" />
<meta property="og:image" content="https://leakfree.org/uploads/default/original/2X/1/1b69109125d4946f223f71d45e038e4e8e7410f9.png" />
<meta property="og:url" content="https://leakfree.org/t/custom-audio-not-playing-in-workshop-ugc/15329" />
<meta name="twitter:url" content="https://leakfree.org/t/custom-audio-not-playing-in-workshop-ugc/15329" />
<meta property="og:title" content="Custom audio not playing in Workshop UGC" />
<meta name="twitter:title" content="Custom audio not playing in Workshop UGC" />
<meta property="og:description" content="Sound mounting via the workshop appears to be broken. When mounting the content as a folder directory using gameinfo.txt, or using a vpk and mounting with gameinfo.txt, the audio plays fine, but the same vpk mounted via the workshop system will not play any custom sounds, instead spitting out error messages with the following format:  [tt]Cannot figure out which search path sound\stojkeholm\sh_sinetone.wav came from.  Absolute path is A:\Program Files\Steam\steamapps\workshop\content\362890\1282..." />
<meta name="twitter:description" content="Sound mounting via the workshop appears to be broken. When mounting the content as a folder directory using gameinfo.txt, or using a vpk and mounting with gameinfo.txt, the audio plays fine, but the same vpk mounted via the workshop system will not play any custom sounds, instead spitting out error messages with the following format:  [tt]Cannot figure out which search path sound\stojkeholm\sh_sinetone.wav came from.  Absolute path is A:\Program Files\Steam\steamapps\workshop\content\362890\1282..." />
<meta property="article:published_time" content="2018-01-26T23:20:32+00:00" />
<meta property="og:ignore_canonical" content="true" />



    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"Custom audio not playing in Workshop UGC","mainEntity":{"@type":"Question","name":"Custom audio not playing in Workshop UGC","text":"Sound mounting via the workshop appears to be broken. When mounting the content as a folder directory using gameinfo.txt, or using a vpk and mounting with gameinfo.txt, the audio plays fine, but the same vpk mounted via the workshop system will not play any custom sounds, instead spitting out error &hellip;","upvoteCount":0,"answerCount":0,"dateCreated":"2018-01-26T23:20:32.000Z","author":{"@type":"Person","name":"Jeffmodproductions"}}}</script>
  </head>
  <body class="crawler">
    








<script src="../../theme-javascripts/451263f573ec5e4eb9c81f3085c4024d360f28d7.js_%3b%20filename_%3dUTF-8%27%27451263f573ec5e4eb9c81f3085c4024d360f28d7d733.js?__ws=leakfree.org"></script>
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png" alt="Leakfree" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="15329.html">Custom audio not playing in Workshop UGC</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/black-mesa-archive/6.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Black Mesa Archive</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/black-mesa-archive/in-game-issues/47.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>In-game Issues</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/JeffMOD.html'><span itemprop='name'>JeffMOD</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="15329.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-01-26T23:20:32Z'>
              <time itemprop='dateModified' datetime='2018-11-25T05:09:51Z' class='post-time'>
                November 25, 2018,  5:09am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Sound mounting via the workshop appears to be broken. When mounting the content as a folder directory using gameinfo.txt, or using a vpk and mounting with gameinfo.txt, the audio plays fine, but the same vpk mounted via the workshop system will not play any custom sounds, instead spitting out error messages with the following format:</p>
<p>[tt]Cannot figure out which search path sound\stojkeholm\sh_sinetone.wav came from.  Absolute path is A:\Program Files\Steam\steamapps\workshop\content\362890\1282390981\stojkeholm.vpk\sound\stojkeholm\sh_sinetone.wav[/tt]<br>
I have opened up the workshop version of the vpk and confirmed that the file <span class="bbcode-i">does</span> still exist in the vpk and hasn’t been pruned from the package by the publish tool somehow, so this is a mounting issue.</p>
<p>I’m just about wrapped up with a workshop release but the map relies heavily on custom audio for story and atmospheric purposes, so I’m unable to do a proper release on the workshop until this is fixed - once this is diagnosed and solved internally, I’d appreciate it if a dev responded to this thread or PM’ed me so I know I can launch the map on the workshop when the next patch is released.</p>
<p>EDIT: I should also mention that the same symptoms occur with .ogg files, not just .wavs, though the error message is different -<br>
[tt]<br>
Failed to create decoder for MP3 [ {filepath/filename}.ogg ]<br>
[/tt] is repeated constantly after attempting to play one.</p>
        </div>

        <meta itemprop='headline' content='Custom audio not playing in Workshop UGC'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/LordDz.html'><span itemprop='name'>LordDz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="15329.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-01-27T09:29:30Z'>
              <time itemprop='dateModified' datetime='2018-11-25T05:09:51Z' class='post-time'>
                November 25, 2018,  5:09am
              </time>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The reason they don’t work is because you haven’t included a soundcache file. <a href="https://developer.valvesoftware.com/wiki/Soundcache" data-bbcode="true" rel="nofollow noopener">https://developer.valvesoftware.com/wiki/Soundcache</a><br>
But Black Mesa doesn’t have the command to generate a soundcache file.  <span class="bbcode-b">snd_writemanifest</span></p>
<p>So I guess you could load up ep2 and just put all the custom sounds in it and then generate the soundcache file there.</p>
<p>Or you can do my shitty way I did for the Spy maps:<br>
call snd_restart with a point_clientcommand called from a trigger_once when the player starts the level.<br>
The problem with snd_restart is that it stops all currently playing sounds, so you can’t have any sounds play from the start, instead you have to play them with inputs.<br>
However if the player starts the map fresh with a load save, it will not run the snd_restart, thus they will not get the custom sounds.</p>
        </div>

        <meta itemprop='headline' content='Custom audio not playing in Workshop UGC'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/JeffMOD.html'><span itemprop='name'>JeffMOD</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="15329.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-01-27T21:17:23Z'>
              <time itemprop='dateModified' datetime='2018-11-25T05:09:52Z' class='post-time'>
                November 25, 2018,  5:09am
              </time>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I suppose I’ll have to look into building a manifest externally then, since I do have a few sounds I play from the beginning. It looks like if you call snd_restart before loading the map the sounds will be fixed for that entire instance, including through load screens, until you restart the local server by loading a save file - but I don’t want to put the burden on the end user if I can avoid it.</p>
<p>If the devs can re-add snd_writemanifest, that would be very helpful!</p>
<p>EDIT: Actually, after a few attempts to build one, I noticed that the VPK I have up on the workshop currently actually does include a sound.cache file, so I guess they’re autogenerated now. Unfortunately, sound still isn;t working on my machine, though oddly enough it did work on another machine one of my playtesters was using, which is very odd.</p>
        </div>

        <meta itemprop='headline' content='Custom audio not playing in Workshop UGC'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Flavrans.html'><span itemprop='name'>Flavrans</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="15329.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-01-28T21:48:56Z'>
              <time itemprop='dateModified' datetime='2018-11-25T05:09:52Z' class='post-time'>
                November 25, 2018,  5:09am
              </time>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Are you aware of the [tt]snd_buildcache[/tt] console command? It allows you to build a sound.cache file manually:</p>
<p>[code]“snd_buildcache”</p>
<ul>
<li>  Rebulds sound cache for a given search path.[/code]The path must be relative to the “Black Mesa” root folder. So, for example, if you have a folder called “mymod” in the bms folder containing your mod’s folder structure, then if you type the command:</li>
</ul>
<p>[tt]snd_buildcache bms\mymod[/tt]</p>
<p>a sound.cache file will be created in the bms\mymod\sound folder.</p>
<p>If it’s a .vpk, then you would type:</p>
<p>[tt]snd_buildcache bms\mymod\mymod.vpk[/tt]</p>
<p>and the file mymod.vpk.sound.cache will be created in the bms\mymod folder.</p>
<p>Note that the game will exit as soon as snd_buildcache command finishes regardless of whether the sound.cache file was created or not.</p>
<p>I’m not really sure about manifest files, though. The snd_buildcache command seems to work without them. I note that the stock maps folder contains a soundcache folder which contains manifest files for every map.</p>
<p>I tried the [tt]-makereslists[/tt] command-line option as described on the VDC page, but there seems to be a bug in which the engine tries to read the maps as maps/maps/mymap.bsp.bsp. Assuming you have a map called mymap.bsp, and you launch with the options [tt]-makereslists +map mymap[/tt], you’ll see something like this in the console log:</p>
<p><code>engine:  -makereslists usage:
engine:    [ -makereslists &lt;optionalscriptfile&gt; ] -- script file to control more complex makereslists operations (multiple passes, etc.)
engine:    [ -usereslistfile filename ] -- get map list from specified file, default is to build for maps/*.bsp
engine:    [ -startmap mapname ] -- restart generation at specified map (after crash, implies resume)
engine:    [ -condebug ] -- prepend console.log entries with mapname or engine if not in a map
engine:    [ +map mapname ] -- generate reslists for specified map and exit after that map
engine:    [ -rebuildaudio ] -- force rebuild of _other_rebuild.cache (metacache) file at exit
engine:    [ -forever ] -- when you get to the end of the maplist, start over from the top
engine:    [ -reslistdir ] -- default is 'reslists', use this to override
engine:    [ -startstage nnn ] -- when running from script file, this starts at specified stage
engine:    [ -collate ] -- skip everything, just merge the reslist from temp folders to the final folder again
engine:  CModelLoader::Map_IsValid:  No such map 'maps/maps/mymap.bsp.bsp'
engine:  reslists: No maps found</code></p>
        </div>

        <meta itemprop='headline' content='Custom audio not playing in Workshop UGC'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <div class="headerNotice">
    <div class="headerNoticeWrapper wrap">
        <p>Founded in 2004, Leakfree.org became one of the first online communities dedicated to Valve’s Source engine development. It is more famously known for the formation of Black Mesa: Source under the 'Leakfree Modification Team' handle in September 2004.</p>
    </div>
</div>
    
  </body>
  

<!-- Mirrored from leakfree.org/t/custom-audio-not-playing-in-workshop-ugc/15329 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 18 Jan 2021 11:01:35 GMT -->
</html>
