<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from leakfree.org/t/psa-custom-script-files/15236 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 18 Jan 2021 09:14:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>PSA - Custom Script Files - Source 1 - Leakfree</title>
    <meta name="description" content="Hey all, 
So over the course of developing Stojkeholm (Have I announced that publicly? I guess I’m announcing that publicly. I’m making a short SP Map pack.) I had the need for some custom files. Due to the Steampipe upd&amp;hellip;">
    <meta name="generator" content="Discourse 2.6.0.beta5 - https://github.com/discourse/discourse version b9fb1cebcd8c8dc34800692fd6f8b72c47b51ad3">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1b69109125d4946f223f71d45e038e4e8e7410f9_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/1/1b69109125d4946f223f71d45e038e4e8e7410f9_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="15236.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://leakfree.org","potentialAction":{"@type":"SearchAction","target":"https://leakfree.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Leakfree Search">

      <link href="../../stylesheets/desktop_8_78a84313b1758221d1fdcffd1499666af5b5fdab.css_%3b%20filename_%3dUTF-8%27%27desktop_8_78a84313b1758221d1fdcffd1499666af5b5fdabd733.css?__ws=leakfree.org" media="all" rel="stylesheet" data-target="desktop" data-theme-id="11"/>
      <link href="../../stylesheets/desktop_theme_11_bcef0414ba3b66792586d18ce571f192263e1732.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_11_bcef0414ba3b66792586d18ce571f192263e1732d733.css?__ws=leakfree.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="11"/>
    <script data-ad-client="ca-pub-2079330348735278" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;PSA - Custom Script Files&#39;" href="15236.rss" />
    <meta property="og:site_name" content="Leakfree" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://leakfree.org/uploads/default/original/2X/1/1b69109125d4946f223f71d45e038e4e8e7410f9.png" />
<meta property="og:image" content="https://leakfree.org/uploads/default/original/2X/1/1b69109125d4946f223f71d45e038e4e8e7410f9.png" />
<meta property="og:url" content="https://leakfree.org/t/psa-custom-script-files/15236" />
<meta name="twitter:url" content="https://leakfree.org/t/psa-custom-script-files/15236" />
<meta property="og:title" content="PSA - Custom Script Files" />
<meta name="twitter:title" content="PSA - Custom Script Files" />
<meta property="og:description" content="Hey all,  So over the course of developing Stojkeholm (Have I announced that publicly? I guess I’m announcing that publicly. I’m making a short SP Map pack.) I had the need for some custom files. Due to the Steampipe updates way back the engine doesn’t (currently) allow overrides, so it’s basically impossible to override certain files, (namely the manifests needed to load custom scripts) and I had to go digging deep in the VDC and do a bit of first-hand research for workarounds. For anyone inter..." />
<meta name="twitter:description" content="Hey all,  So over the course of developing Stojkeholm (Have I announced that publicly? I guess I’m announcing that publicly. I’m making a short SP Map pack.) I had the need for some custom files. Due to the Steampipe updates way back the engine doesn’t (currently) allow overrides, so it’s basically impossible to override certain files, (namely the manifests needed to load custom scripts) and I had to go digging deep in the VDC and do a bit of first-hand research for workarounds. For anyone inter..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />
<meta property="article:published_time" content="2017-07-24T01:20:10+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    








<script src="../../theme-javascripts/451263f573ec5e4eb9c81f3085c4024d360f28d7.js_%3b%20filename_%3dUTF-8%27%27451263f573ec5e4eb9c81f3085c4024d360f28d7d733.js?__ws=leakfree.org"></script>
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png" alt="Leakfree" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="15236.html">PSA - Custom Script Files</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/general-development/7.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>General Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/general-development/source-1/43.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #ED207B'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Source 1</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/JeffMOD.html'><span itemprop='name'>JeffMOD</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="15236.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2017-07-24T01:20:10Z'>
              <time itemprop='dateModified' datetime='2018-11-25T05:06:04Z' class='post-time'>
                November 25, 2018,  5:06am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hey all,<br>
So over the course of developing Stojkeholm (Have I announced that publicly? I guess I’m announcing that publicly. I’m making a short SP Map pack.) I had the need for some custom files. Due to the Steampipe updates way back the engine doesn’t (currently) allow overrides, so it’s basically impossible to override certain files, (namely the manifests needed to load custom scripts) and I had to go digging deep in the VDC and do a bit of first-hand research for workarounds. For anyone interested, the following files can be used to add custom content to your map that would otherwise require editing a manifest:</p>
<p>[table]<br>
[tr]<br>
[td]Soundscapes[/td]<br>
[td]<font face="Consolas,Courier New,Courier,monospace">scripts/soundscapes_[mapname].txt</font>[/td]<br>
[/tr]<br>
[tr]<br>
[td]Particles[/td]<br>
[td]<font face="Consolas,Courier New,Courier,monospace">maps/[mapname]_particles.txt</font>[/td]<br>
[/tr]<br>
[tr]<br>
[td]Soundscripts[/td]<br>
[td]<font face="Consolas,Courier New,Courier,monospace">maps/[mapname]_level_sounds.txt</font>[/td]<br>
[/tr]<br>
[/table]<br>
I have confirmed firsthand that these files allow the loading of custom assets defined within them on the current Black Mesa branch of Source. To my knowledge, at the time of writing (July 23, 2017) no other script files requiring a manifest have per-map alternatives - if anyone else has knowledge to the contrary, please let me know by posting down below.</p>
<p>There is one more caveat - at present, tools mode (-tools -nop4) is non-functional in public builds of the steam version of Black Mesa. As such, if you want to make or modify particles, you’ll need to find a workaround involving another version of the engine - I personally used the mod version of Black Mesa so I wouldn’t have to extract a bunch of stuff from the VPKs. Unless you’re using CS:GO or DOTA 2, The format definitely hasn’t changed so they should be compatible with BM.</p>
<p>I hope this small info dump helps people who are looking to add some extra atmosphere to their BM maps, and I plan on updating this thread if I figure out ways to load more content or get word from the devs that the game has been updated to allow additional per-map scripts.<br>
Happy Mapping!</p>
        </div>

        <meta itemprop='headline' content='PSA - Custom Script Files'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/LordDz.html'><span itemprop='name'>LordDz</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="15236.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2017-07-24T12:33:57Z'>
              <time itemprop='dateModified' datetime='2018-11-25T05:06:05Z' class='post-time'>
                November 25, 2018,  5:06am
              </time>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>An issue I’ve had in my custom maps with custom sounds:</p>
<p>Some sounds would not be recognised by the engine as the console whines about not finding them with the path put in for the sounds (ambient_generics).</p>
<p>However inputting a snd_restart in the console fixes this.<br>
So the mapper would have to put in the snd_restart with a point_clientcommand at startup of the map.</p>
<p>The issue being that snd_restart stops all playing sounds so you can’t have any sound be looping at the start of the map,<br>
and if the user loads a save from the map with a fresh startup of the game (thus missing the snd_restart) the sounds will not play.</p>
<p>Maybe the custom sound_scripts.txt fixes this. Guess I’ll have to test it.</p>
        </div>

        <meta itemprop='headline' content='PSA - Custom Script Files'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Admiral_Sakai.html'><span itemprop='name'>Admiral_Sakai</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="15236.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-11-26T05:58:26Z'>
              <time itemprop='dateModified' datetime='2019-11-26T05:59:02Z' class='post-time'>
                November 26, 2019,  5:59am
              </time>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Haven’t had any luck getting custom soundscripts to work- I’ve tried putting the file <code>pd_c1a2a_level_sounds.txt</code> in <code>bms/scripts/maps</code>, <code>bms/scripts</code>, and <code>bms/maps</code> and have not been able to get it to either show up in the Hammer sound browser or play from an ambient_generic in game. It contains the following text:</p>
<pre><code class="lang-auto">"OCPD.TURRET_IS_ON"
{
	"channel"		"CHAN_STREAM"
	"volume"		"1.0"
	"pitch"			"100"
	"soundlevel"	"SNDLVL_NORM"
	"wave"			"vox_overhead\c1a2_06.wav"
}
</code></pre>
<p>There is no text printed to the console, relating to not finding the .wav file or anything else.</p>
        </div>

        <meta itemprop='headline' content='PSA - Custom Script Files'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Flavrans.html'><span itemprop='name'>Flavrans</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="15236.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-11-26T18:51:31Z' class='post-time'>
                November 26, 2019,  6:51pm
              </time>
              <meta itemprop='dateModified' content='2019-11-26T18:51:31Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think you need to add the file to <code>game_sounds_manifest.txt</code> to make it show up in Hammer, but it should work when you run the map in game. Remember to remove the custom <code>game_sounds_manifest.txt</code> before you test the map.</p>
<pre><code class="lang-auto">	"precache_file"		"maps/pd_c1a2a_level_sounds.txt"
</code></pre>
<aside class="quote no-group" data-username="JeffMOD" data-post="1" data-topic="15236">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/leakfree.org/jeffmod/40/4333_2.png" class="avatar"> JeffMOD:</div>
<blockquote>
<p>There is one more caveat - at present, tools mode (-tools -nop4) is non-functional in public builds of the steam version of Black Mesa. As such, if you want to make or modify particles, you’ll need to find a workaround involving another version of the engine</p>
</blockquote>
</aside>
<p>The tools isn’t working because of a missing file. Create a text file called <code>enginetools.txt</code> in the <code>...\Black Mesa\bin</code> folder with the following contents:</p>
<pre><code class="lang-auto">"enginetools"
{
	"library"	"tools/actbusy.dll"
	"library"	"tools/commedit.dll"
	"library"	"tools/pet.dll"
	"library"	"tools/vcdblock.dll"
	"library"	"tools/vmt.dll"
}
</code></pre>
<p>The tools mode (<code>-tools -nop4</code>) should now work.</p>
        </div>

        <meta itemprop='headline' content='PSA - Custom Script Files'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Admiral_Sakai.html'><span itemprop='name'>Admiral_Sakai</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="15236.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-03T21:37:50Z' class='post-time'>
                December 3, 2019,  9:37pm
              </time>
              <meta itemprop='dateModified' content='2019-12-03T21:37:50Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Figured out what the problem was- the sound was actually loading fine, but the ent_fire console command I was using to trigger the ambient_generic that played it <em>only works if</em> <code>developer 1</code> <em>is set in the console</em>. Linking the ambient_generic to an entity in the world or triggering it with ent_fire after setting developer mode both work, with or without a modified game_sounds_manifest.</p>
        </div>

        <meta itemprop='headline' content='PSA - Custom Script Files'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/CatzEyes93.html'><span itemprop='name'>CatzEyes93</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="15236.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-04T15:41:19Z' class='post-time'>
                December 4, 2019,  3:41pm
              </time>
              <meta itemprop='dateModified' content='2019-12-04T15:41:19Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>You should post this over on the steam forums. This is rather helpful if you ask me.</p>
        </div>

        <meta itemprop='headline' content='PSA - Custom Script Files'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <div class="headerNotice">
    <div class="headerNoticeWrapper wrap">
        <p>Founded in 2004, Leakfree.org became one of the first online communities dedicated to Valve’s Source engine development. It is more famously known for the formation of Black Mesa: Source under the 'Leakfree Modification Team' handle in September 2004.</p>
    </div>
</div>
    
  </body>
  

<!-- Mirrored from leakfree.org/t/psa-custom-script-files/15236 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 18 Jan 2021 09:14:58 GMT -->
</html>
