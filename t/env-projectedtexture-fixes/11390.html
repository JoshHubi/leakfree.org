<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from leakfree.org/t/env-projectedtexture-fixes/11390 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 18 Jan 2021 10:34:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>env_projectedtexture fixes - Help and Support - Leakfree</title>
    <meta name="description" content="I’m trying to do this: 
https://developer.valvesoftware.com/wiki/Env_projectedtexture/fixes 
I’ve put in the code, following the directions to the best of my knowledge. But I’m getting some rather entertaining errors: 
[&amp;hellip;">
    <meta name="generator" content="Discourse 2.6.0.beta5 - https://github.com/discourse/discourse version b9fb1cebcd8c8dc34800692fd6f8b72c47b51ad3">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1b69109125d4946f223f71d45e038e4e8e7410f9_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/1/1b69109125d4946f223f71d45e038e4e8e7410f9_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="11390.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://leakfree.org","potentialAction":{"@type":"SearchAction","target":"https://leakfree.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Leakfree Search">

      <link href="../../stylesheets/desktop_8_78a84313b1758221d1fdcffd1499666af5b5fdab.css_%3b%20filename_%3dUTF-8%27%27desktop_8_78a84313b1758221d1fdcffd1499666af5b5fdabd733.css?__ws=leakfree.org" media="all" rel="stylesheet" data-target="desktop" data-theme-id="11"/>
      <link href="../../stylesheets/desktop_theme_11_bcef0414ba3b66792586d18ce571f192263e1732.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_11_bcef0414ba3b66792586d18ce571f192263e1732d733.css?__ws=leakfree.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="11"/>
    <script data-ad-client="ca-pub-2079330348735278" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;env_projectedtexture fixes&#39;" href="11390.rss" />
    <meta property="og:site_name" content="Leakfree" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://leakfree.org/uploads/default/original/2X/1/1b69109125d4946f223f71d45e038e4e8e7410f9.png" />
<meta property="og:image" content="https://leakfree.org/uploads/default/original/2X/1/1b69109125d4946f223f71d45e038e4e8e7410f9.png" />
<meta property="og:url" content="https://leakfree.org/t/env-projectedtexture-fixes/11390" />
<meta name="twitter:url" content="https://leakfree.org/t/env-projectedtexture-fixes/11390" />
<meta property="og:title" content="env_projectedtexture fixes" />
<meta name="twitter:title" content="env_projectedtexture fixes" />
<meta property="og:description" content="I’m trying to do this:  https://developer.valvesoftware.com/wiki/Env_projectedtexture/fixes  I’ve put in the code, following the directions to the best of my knowledge. But I’m getting some rather entertaining errors:  [code]1&gt;c:\program files (x86)\steam\steamapps\sourcemods\five codebase\src\game\client\c_env_projectedtexture.cpp(170) : error C2181: illegal else without matching if  1&gt;c:\program files (x86)\steam\steamapps\sourcemods\five codebase\src\game\client\c_env_projectedtexture.cpp(228..." />
<meta name="twitter:description" content="I’m trying to do this:  https://developer.valvesoftware.com/wiki/Env_projectedtexture/fixes  I’ve put in the code, following the directions to the best of my knowledge. But I’m getting some rather entertaining errors:  [code]1&gt;c:\program files (x86)\steam\steamapps\sourcemods\five codebase\src\game\client\c_env_projectedtexture.cpp(170) : error C2181: illegal else without matching if  1&gt;c:\program files (x86)\steam\steamapps\sourcemods\five codebase\src\game\client\c_env_projectedtexture.cpp(228..." />
<meta property="article:published_time" content="2012-10-07T21:06:39+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    








<script src="../../theme-javascripts/451263f573ec5e4eb9c81f3085c4024d360f28d7.js_%3b%20filename_%3dUTF-8%27%27451263f573ec5e4eb9c81f3085c4024d360f28d7d733.js?__ws=leakfree.org"></script>
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png" alt="Leakfree" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="11390.html">env_projectedtexture fixes</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/technology-and-gaming/19.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #8C6238'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Technology and Gaming</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/technology-and-gaming/help-and-support/39.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #808281'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Help and Support</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/k3nny1550.html'><span itemprop='name'>k3nny1550</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="11390.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2012-10-07T21:06:39Z'>
              <time itemprop='dateModified' datetime='2018-11-25T02:43:05Z' class='post-time'>
                November 25, 2018,  2:43am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I’m trying to do this:</p>
<p><a href="https://developer.valvesoftware.com/wiki/Env_projectedtexture/fixes" data-bbcode="true" rel="nofollow noopener">https://developer.valvesoftware.com/wiki/Env_projectedtexture/fixes</a></p>
<p>I’ve put in the code, following the directions to the best of my knowledge. But I’m getting some rather entertaining errors:</p>
<p>[code]1&gt;c:\program files (x86)\steam\steamapps\sourcemods\five codebase\src\game\client\c_env_projectedtexture.cpp(170) : error C2181: illegal else without matching if</p>
<p>1&gt;c:\program files (x86)\steam\steamapps\sourcemods\five codebase\src\game\client\c_env_projectedtexture.cpp(228) : error C2601: ‘C_EnvProjectedTexture::Simulate’ : local function definitions are illegal</p>
<p>1&gt;        c:\program files (x86)\steam\steamapps\sourcemods\five codebase\src\game\client\c_env_projectedtexture.cpp(126): this line contains a ‘{’ which has not yet been matched</p>
<p>1&gt;c:\program files (x86)\steam\steamapps\sourcemods\five codebase\src\game\client\c_env_projectedtexture.cpp(234) : fatal error C1075: end of file found before the left brace ‘{’ at ‘c:\program files (x86)\steam\steamapps\sourcemods\five codebase\src\game\client\c_env_projectedtexture.cpp(126)’ was matched</p>
<p>1&gt;c:\program files (x86)\steam\steamapps\sourcemods\five codebase\src\game\client\spritemodel.cpp(442) : error C3861: ‘IsBIK’: identifier not found[/code]</p>
<p>Most of these seem to be in the env_projectedtexture.cpp, since I was modifying it to run the tutorial’s code.</p>
<aside class="quote no-group" data-username="My Stupid Code">
<div class="title">
<div class="quote-controls"></div>
 My Stupid Code:</div>
<blockquote>
<p>[code]void C_EnvProjectedTexture::OnDataChanged( DataUpdateType_t updateType )<br>
{<br>
UpdateLight( true );<br>
BaseClass::OnDataChanged( updateType );<br>
}</p>
<p>void C_EnvProjectedTexture::UpdateLight( bool bForceUpdate )<br>
{<br>
if ( m_bState == false )<br>
{<br>
if ( m_LightHandle != CLIENTSHADOW_INVALID_HANDLE )<br>
{<br>
ShutDownLightHandle();<br>
}</p>
<pre><code>	return;
}

Vector vForward, vRight, vUp, vPos = GetAbsOrigin();
FlashlightState_t state;

if ( m_hTargetEntity != NULL )
{
	if ( m_bCameraSpace )
	{
		const QAngle &amp;angles = GetLocalAngles();

		C_BasePlayer *pPlayer = C_BasePlayer::GetLocalPlayer();
		if( pPlayer )
		{
			const QAngle playerAngles = pPlayer-&gt;GetAbsAngles();
			
			Vector vPlayerForward, vPlayerRight, vPlayerUp;
			AngleVectors( playerAngles, &amp;vPlayerForward, &amp;vPlayerRight, &amp;vPlayerUp );

        	matrix3x4_t	mRotMatrix;
			AngleMatrix( angles, mRotMatrix );

			VectorITransform( vPlayerForward, mRotMatrix, vForward );
			VectorITransform( vPlayerRight, mRotMatrix, vRight );
			VectorITransform( vPlayerUp, mRotMatrix, vUp );

			float dist = (m_hTargetEntity-&gt;GetAbsOrigin() - GetAbsOrigin()).Length();
			vPos = m_hTargetEntity-&gt;GetAbsOrigin() - vForward*dist;

			VectorNormalize( vForward );
			VectorNormalize( vRight );
			VectorNormalize( vUp );
		}

	else
		{
			// VXP: Fixing targeting
			Vector vecToTarget;
			QAngle vecAngles;
			if ( m_hTargetEntity == NULL )
			{
				vecAngles = GetAbsAngles();
			}
			else
			{
				vecToTarget = m_hTargetEntity-&gt;GetAbsOrigin() - GetAbsOrigin();
				VectorAngles( vecToTarget, vecAngles );
			}
			AngleVectors( vecAngles, &amp;vForward, &amp;vRight, &amp;vUp );
		}
else
{
	AngleVectors( GetAbsAngles(), &amp;vForward, &amp;vRight, &amp;vUp );
}

state.m_fHorizontalFOVDegrees = m_flLightFOV;
state.m_fVerticalFOVDegrees = m_flLightFOV;

state.m_vecLightOrigin = vPos;
BasisToQuaternion( vForward, vRight, vUp, state.m_quatOrientation );

state.m_fQuadraticAtten = 0.0;
state.m_fLinearAtten = 100;
state.m_fConstantAtten = 0.0f;
state.m_Color[0] = m_LinearFloatLightColor.x;
state.m_Color[1] = m_LinearFloatLightColor.y;
state.m_Color[2] = m_LinearFloatLightColor.z;
state.m_Color[3] = 0.0f; // fixme: need to make ambient work m_flAmbient;
state.m_NearZ = m_flNearZ;
state.m_FarZ = m_flFarZ;
state.m_flShadowSlopeScaleDepthBias = mat_slopescaledepthbias_shadowmap.GetFloat();
state.m_flShadowDepthBias = mat_depthbias_shadowmap.GetFloat();
state.m_bEnableShadows = m_bEnableShadows;
state.m_pSpotlightTexture = materials-&gt;FindTexture( m_SpotlightTextureName, TEXTURE_GROUP_OTHER, false );
state.m_nSpotlightTextureFrame = m_nSpotlightTextureFrame;

state.m_nShadowQuality = m_nShadowQuality; // Allow entity to affect shadow quality

if( m_LightHandle == CLIENTSHADOW_INVALID_HANDLE )
{
	m_LightHandle = g_pClientShadowMgr-&gt;CreateFlashlight( state );
}
else
{
	if ( m_hTargetEntity != NULL || bForceUpdate == true )
	{
		g_pClientShadowMgr-&gt;UpdateFlashlightState( m_LightHandle, state );
	}
}

if( m_bLightOnlyTarget )
{
	g_pClientShadowMgr-&gt;SetFlashlightTarget( m_LightHandle, m_hTargetEntity );
}
else
{
	g_pClientShadowMgr-&gt;SetFlashlightTarget( m_LightHandle, NULL );
}

g_pClientShadowMgr-&gt;SetFlashlightLightWorld( m_LightHandle, m_bLightWorld );

//if ( bForceUpdate == false )
//{
	g_pClientShadowMgr-&gt;UpdateProjectedTexture( m_LightHandle, true );
//}
</code></pre>
<p>}</p>
<p>void C_EnvProjectedTexture::Simulate( void )<br>
{<br>
UpdateLight( GetMoveParent() != NULL );</p>
<pre><code>BaseClass::Simulate();
</code></pre>
<p>}</p>
<p>[/code]</p>
</blockquote>
</aside>
<p>I’m a bit of a novice at this coding thing -_-;;<br>
Anyone want to give this a punt, or see what I’m doing wrong?</p>
        </div>

        <meta itemprop='headline' content='env_projectedtexture fixes'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Keresh.html'><span itemprop='name'>Keresh</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="11390.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2012-10-07T22:56:56Z'>
              <time itemprop='dateModified' datetime='2018-11-25T02:43:07Z' class='post-time'>
                November 25, 2018,  2:43am
              </time>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Seems like you’re missing some closing brackets. Try this and report back:</p>
<p>[code]void C_EnvProjectedTexture::OnDataChanged( DataUpdateType_t updateType )<br>
{<br>
UpdateLight( true );<br>
BaseClass::OnDataChanged( updateType );<br>
}</p>
<p>void C_EnvProjectedTexture::UpdateLight( bool bForceUpdate )<br>
{<br>
if ( m_bState == false )<br>
{<br>
if ( m_LightHandle != CLIENTSHADOW_INVALID_HANDLE )<br>
{<br>
ShutDownLightHandle();<br>
}</p>
<pre><code>	return;
}
Vector vForward, vRight, vUp, vPos = GetAbsOrigin();
FlashlightState_t state;

if ( m_hTargetEntity != NULL )
{
	if ( m_bCameraSpace )
	{
		const QAngle &amp;angles = GetLocalAngles();

		C_BasePlayer *pPlayer = C_BasePlayer::GetLocalPlayer();
		if( pPlayer )
		{
			const QAngle playerAngles = pPlayer-&gt;GetAbsAngles();
			
			Vector vPlayerForward, vPlayerRight, vPlayerUp;
			AngleVectors( playerAngles, &amp;vPlayerForward, &amp;vPlayerRight, &amp;vPlayerUp );

        	matrix3x4_t	mRotMatrix;
			AngleMatrix( angles, mRotMatrix );

			VectorITransform( vPlayerForward, mRotMatrix, vForward );
			VectorITransform( vPlayerRight, mRotMatrix, vRight );
			VectorITransform( vPlayerUp, mRotMatrix, vUp );

			float dist = (m_hTargetEntity-&gt;GetAbsOrigin() - GetAbsOrigin()).Length();
			vPos = m_hTargetEntity-&gt;GetAbsOrigin() - vForward*dist;

			VectorNormalize( vForward );
			VectorNormalize( vRight );
			VectorNormalize( vUp );
		}
	}
	else
	{
		// VXP: Fixing targeting
		Vector vecToTarget;
		QAngle vecAngles;
		if ( m_hTargetEntity == NULL )
		{
			vecAngles = GetAbsAngles();
		}
		else
		{
			vecToTarget = m_hTargetEntity-&gt;GetAbsOrigin() - GetAbsOrigin();
			VectorAngles( vecToTarget, vecAngles );
		}
		AngleVectors( vecAngles, &amp;vForward, &amp;vRight, &amp;vUp );
	}
}
else
{
	AngleVectors( GetAbsAngles(), &amp;vForward, &amp;vRight, &amp;vUp );
}

state.m_fHorizontalFOVDegrees = m_flLightFOV;
state.m_fVerticalFOVDegrees = m_flLightFOV;

state.m_vecLightOrigin = vPos;
BasisToQuaternion( vForward, vRight, vUp, state.m_quatOrientation );

state.m_fQuadraticAtten = 0.0;
state.m_fLinearAtten = 100;
state.m_fConstantAtten = 0.0f;
state.m_Color[0] = m_LinearFloatLightColor.x;
state.m_Color[1] = m_LinearFloatLightColor.y;
state.m_Color[2] = m_LinearFloatLightColor.z;
state.m_Color[3] = 0.0f; // fixme: need to make ambient work m_flAmbient;
state.m_NearZ = m_flNearZ;
state.m_FarZ = m_flFarZ;
state.m_flShadowSlopeScaleDepthBias = mat_slopescaledepthbias_shadowmap.GetFloat();
state.m_flShadowDepthBias = mat_depthbias_shadowmap.GetFloat();
state.m_bEnableShadows = m_bEnableShadows;
state.m_pSpotlightTexture = materials-&gt;FindTexture( m_SpotlightTextureName, TEXTURE_GROUP_OTHER, false );
state.m_nSpotlightTextureFrame = m_nSpotlightTextureFrame;

state.m_nShadowQuality = m_nShadowQuality; // Allow entity to affect shadow quality

if( m_LightHandle == CLIENTSHADOW_INVALID_HANDLE )
{
	m_LightHandle = g_pClientShadowMgr-&gt;CreateFlashlight( state );
}
else
{
	if ( m_hTargetEntity != NULL || bForceUpdate == true )
	{
		g_pClientShadowMgr-&gt;UpdateFlashlightState( m_LightHandle, state );
	}
}

if( m_bLightOnlyTarget )
{
	g_pClientShadowMgr-&gt;SetFlashlightTarget( m_LightHandle, m_hTargetEntity );
}
else
{
	g_pClientShadowMgr-&gt;SetFlashlightTarget( m_LightHandle, NULL );
}

g_pClientShadowMgr-&gt;SetFlashlightLightWorld( m_LightHandle, m_bLightWorld );

//if ( bForceUpdate == false )
//{
	g_pClientShadowMgr-&gt;UpdateProjectedTexture( m_LightHandle, true );
//}
</code></pre>
<p>}</p>
<p>void C_EnvProjectedTexture::Simulate( void )<br>
{<br>
UpdateLight( GetMoveParent() != NULL );</p>
<pre><code>BaseClass::Simulate();
</code></pre>
<p>}[/code]</p>
        </div>

        <meta itemprop='headline' content='env_projectedtexture fixes'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/k3nny1550.html'><span itemprop='name'>k3nny1550</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="11390.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2012-10-08T01:23:06Z'>
              <time itemprop='dateModified' datetime='2018-11-25T02:43:10Z' class='post-time'>
                November 25, 2018,  2:43am
              </time>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>YOU ARE THE MAN, K-MAN.</p>
<p>That’s fixed everything in the projected texture project. However, the project failed because of something in a part of the project I don’t remember touching at all.</p>
<p><code>1&gt;c:\program files (x86)\steam\steamapps\sourcemods\five codebase\src\game\client\spritemodel.cpp(442) : error C3861: 'IsBIK': identifier not found
</code></p>
<p>The lines referenced in spritemodel:</p>
<p>[code]void CEngineSprite: <img src="../../images/emoji/twitter/smileyc164.png?v=9" title=":smiley:" class="emoji" alt=":smiley:"> rawFrameOfSize( int frame, int x, int y, int iWidth, int iHeight, const wrect_t *prcSubRect )<br>
{<br>
// FIXME: If we ever call this with AVIs, need to have it call GetTexCoordRange and make that work<br>
Assert( !IsAVI() &amp;&amp; !IsBIK() );</p>
<pre><code>float fLeft = 0;
float fRight = 1;
float fTop = 0;
float fBottom = 1;

if ( prcSubRect )
{
	AdjustSubRect( this, frame, &amp;fLeft, &amp;fRight, &amp;fTop, &amp;fBottom, &amp;iWidth, &amp;iHeight, prcSubRect );
}

if ( giScissorTest &amp;&amp; !Scissor( x, y, iWidth, iHeight, fLeft, fTop, fRight, fBottom ) )
	return;

SetFrame( frame );

CMatRenderContextPtr pRenderContext( materials );
IMesh* pMesh = pRenderContext-&gt;GetDynamicMesh( true, NULL, NULL, GetMaterial() );

CMeshBuilder meshBuilder;
meshBuilder.Begin( pMesh, MATERIAL_QUADS, 1 );

float color[3];
GetHUDSpriteColor( color );

meshBuilder.Color3fv( color );
meshBuilder.TexCoord2f( 0, fLeft, fTop );
meshBuilder.Position3f( x, y, 0.0f );
meshBuilder.AdvanceVertex();

meshBuilder.Color3fv( color );
meshBuilder.TexCoord2f( 0, fRight, fTop );
meshBuilder.Position3f( x + iWidth, y, 0.0f );
meshBuilder.AdvanceVertex();

meshBuilder.Color3fv( color );
meshBuilder.TexCoord2f( 0, fRight, fBottom );
meshBuilder.Position3f( x + iWidth, y + iHeight, 0.0f );
meshBuilder.AdvanceVertex();

meshBuilder.Color3fv( color );
meshBuilder.TexCoord2f( 0, fLeft, fBottom );
meshBuilder.Position3f( x, y + iHeight, 0.0f );
meshBuilder.AdvanceVertex();

meshBuilder.End();
pMesh-&gt;Draw();
</code></pre>
<p>}[/code]</p>
<p>What’s weird is that I never touched this part of the code. Is this error in the vanilla 2007 source code? Should I just comment it out?</p>
        </div>

        <meta itemprop='headline' content='env_projectedtexture fixes'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Keresh.html'><span itemprop='name'>Keresh</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="11390.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2012-10-08T08:06:45Z'>
              <time itemprop='dateModified' datetime='2018-11-25T02:43:18Z' class='post-time'>
                November 25, 2018,  2:43am
              </time>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Try commenting out <span class="bbcode-i">Assert( !IsAVI() &amp;&amp; !IsBIK() );</span></p>
        </div>

        <meta itemprop='headline' content='env_projectedtexture fixes'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/k3nny1550.html'><span itemprop='name'>k3nny1550</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="11390.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2012-10-08T14:38:46Z'>
              <time itemprop='dateModified' datetime='2018-11-25T02:43:29Z' class='post-time'>
                November 25, 2018,  2:43am
              </time>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Yay, the build was successful! Thanks, Keresh! I’ll have to make a test map with some projected textures and see if it works. I will report back with my findings.</p>
        </div>

        <meta itemprop='headline' content='env_projectedtexture fixes'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <div class="headerNotice">
    <div class="headerNoticeWrapper wrap">
        <p>Founded in 2004, Leakfree.org became one of the first online communities dedicated to Valve’s Source engine development. It is more famously known for the formation of Black Mesa: Source under the 'Leakfree Modification Team' handle in September 2004.</p>
    </div>
</div>
    
  </body>
  

<!-- Mirrored from leakfree.org/t/env-projectedtexture-fixes/11390 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 18 Jan 2021 10:34:58 GMT -->
</html>
