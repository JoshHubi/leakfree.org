<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from leakfree.org/t/tutorial-advanced-hint-brushes/12262 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 18 Jan 2021 10:43:56 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[Tutorial] - Advanced hint brushes - Source 1 - Leakfree</title>
    <meta name="description" content="Hello everyone, 
So over the (short) course for mapping with Loop Mod, I came across some interesting situations when it came to visibility. In short, there came a point where I was playing my level and I decided to run &amp;hellip;">
    <meta name="generator" content="Discourse 2.6.0.beta5 - https://github.com/discourse/discourse version b9fb1cebcd8c8dc34800692fd6f8b72c47b51ad3">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/2X/1/1b69109125d4946f223f71d45e038e4e8e7410f9_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/1/1b69109125d4946f223f71d45e038e4e8e7410f9_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="12262.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://leakfree.org","potentialAction":{"@type":"SearchAction","target":"https://leakfree.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Leakfree Search">

      <link href="../../stylesheets/desktop_8_78a84313b1758221d1fdcffd1499666af5b5fdab.css_%3b%20filename_%3dUTF-8%27%27desktop_8_78a84313b1758221d1fdcffd1499666af5b5fdabd733.css?__ws=leakfree.org" media="all" rel="stylesheet" data-target="desktop" data-theme-id="11"/>
      <link href="../../stylesheets/desktop_theme_11_bcef0414ba3b66792586d18ce571f192263e1732.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_11_bcef0414ba3b66792586d18ce571f192263e1732d733.css?__ws=leakfree.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="11"/>
    <script data-ad-client="ca-pub-2079330348735278" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[Tutorial] - Advanced hint brushes&#39;" href="12262.rss" />
    <meta property="og:site_name" content="Leakfree" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://leakfree.org/uploads/default/original/3X/2/a/2ae3c6a2eadc895ec786bff99a6fd2f7bc92a0f8.png" />
<meta property="og:image" content="https://leakfree.org/uploads/default/original/3X/2/a/2ae3c6a2eadc895ec786bff99a6fd2f7bc92a0f8.png" />
<meta property="og:url" content="https://leakfree.org/t/tutorial-advanced-hint-brushes/12262" />
<meta name="twitter:url" content="https://leakfree.org/t/tutorial-advanced-hint-brushes/12262" />
<meta property="og:title" content="[Tutorial] - Advanced hint brushes" />
<meta name="twitter:title" content="[Tutorial] - Advanced hint brushes" />
<meta property="og:description" content="Hello everyone,  So over the (short) course for mapping with Loop Mod, I came across some interesting situations when it came to visibility. In short, there came a point where I was playing my level and I decided to run some tests. To my horror, the entire level was rendering all the time, and as one could imagine, that slows the game way down. That’s not good. Obviously this means a problem with the visleafs.  For those of you who don’t know, visleafs are boxes created when the map is compiled...." />
<meta name="twitter:description" content="Hello everyone,  So over the (short) course for mapping with Loop Mod, I came across some interesting situations when it came to visibility. In short, there came a point where I was playing my level and I decided to run some tests. To my horror, the entire level was rendering all the time, and as one could imagine, that slows the game way down. That’s not good. Obviously this means a problem with the visleafs.  For those of you who don’t know, visleafs are boxes created when the map is compiled...." />
<meta property="article:published_time" content="2013-04-15T19:09:09+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    








<script src="../../theme-javascripts/451263f573ec5e4eb9c81f3085c4024d360f28d7.js_%3b%20filename_%3dUTF-8%27%27451263f573ec5e4eb9c81f3085c4024d360f28d7d733.js?__ws=leakfree.org"></script>
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png" alt="Leakfree" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="12262.html">[Tutorial] - Advanced hint brushes</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/general-development/7.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>General Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/general-development/source-1/43.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #ED207B'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Source 1</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/RK1.html'><span itemprop='name'>RK1</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="12262.html">

            <link itemprop="image" href="../../uploads/default/original/3X/2/a/2ae3c6a2eadc895ec786bff99a6fd2f7bc92a0f8.png">

          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2013-04-15T19:09:09Z'>
              <time itemprop='dateModified' datetime='2020-08-12T07:34:46Z' class='post-time'>
                August 12, 2020,  7:34am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hello everyone,</p>
<p>So over the (short) course for mapping with Loop Mod, I came across some interesting situations when it came to visibility. In short, there came a point where I was playing my level and I decided to run some tests. To my horror, the entire level was rendering all the time, and as one could imagine, that slows the game way down. That’s not good. Obviously this means a problem with the visleafs.</p>
<p>For those of you who don’t know, visleafs are boxes created when the map is compiled. These boxes determine all of the areas within a level. The entire world is put into one visleaf or another. Enter VVIS, which tests the visibility of all visleafs to determine what should be rendered by the engine when the player is in a given location.</p>
<p>The way it does this is that it attempting to draw a line between one leaf and another. If the active leaf is able to draw a line between itself and another leaf, the entire contents of that other leaf are rendered. This is a concept called the Potential Visible Set, or PVS.</p>
<p>So you can imagine that when I say the whole level was rendering, it was because the leaf I was in could see leaves throughout the entire map. Obviously I want to do something about this, and I must do so with the use of hint brushes (which cut visleafs).</p>
<p>And in doing so I learned a few things of which I will share.</p>
<p>There are three questions that should be considering when placing hint (and skip brushes) inside a map. They are:</p>
<ol>
<li>Is it cheap in terms of geometry?</li>
<li>Does it reduce the PVS?</li>
<li>Does it create a simple visleaf layout?</li>
</ol>
<p>In this tutorial, I will detail how I came about realizing all three of these areas using a real situation that I came across.</p>
<p>So let’s say we have a situation like this.</p>
<p><img src="../../uploads/default/original/3X/2/a/2ae3c6a2eadc895ec786bff99a6fd2f7bc92a0f8.png" alt="" data-base62-sha1="67q3O75wzG5CLbeC8ty7uA5kgmQ" width="300" height="300"></p>
<p>Our world is in black. Visleafs are in red.</p>
<p>So as we can see, vbsp didn’t really cut this for optimal performance. For one, leaf 1 can see 2 and 3, meaning that this entire area is rendered, even if we are standing at the top of the map. Let’s start with some simple leaf’ing; I’m going to cut so that we can’t see the opposite tunnel.</p>
<p><img src="../../uploads/default/original/3X/f/8/f8a04b58351194cf02e8c84fae2ea4a3c07a60a2.png" alt="" data-base62-sha1="ztrQbkmfsmSUzp0aWMjCC9vCHMS" width="300" height="300"></p>
<p>So this is a bit better. The contents of leaf 1 cannot see leaf 6. Leaf 3 can’t see leaf 7. And vice versa. We’ve already cut down on the visibility.</p>
<p>But consider the following. If you happen to be mapping to a high-cost level and you need all the brushsides you can get (there is a limit to the amount of faces you can have in a single level), this setup is not the way to go. We’ve just spent 24 brushsides trying to optimize one area. That’s pretty significant.</p>
<p>Is there any way we can simplify this area? The answer is yes. Notice that some hint brushes share a plane with each other. We can use this to our advantage, using one brush for two tunnels. If we apply that thinking…</p>
<p><img src="../../uploads/default/original/3X/4/b/4b3a5bc81571eecbbd6ede005553499b766cfb21.png" alt="" data-base62-sha1="aJuQfSmsVNoa3a3PTfsqsRRAUb7" width="300" height="300"></p>
<p>We have just cut our brushsides by half. That’s a<span class="bbcode-i"> very</span> nice improvement. And it does the exact same job as our previous iteration. But can it be better? Of course! Notice that the top and bottom are parallel to each other.</p>
<p><img src="../../uploads/default/original/3X/b/d/bd618a7851e15d68ff287374902fc053a4148e69.png" alt="" data-base62-sha1="r1ldMCv6eJGqwGhOb2pdOxQxCvT" width="300" height="300"></p>
<p>We are doing the exact same thing using just one brush. Still doing great!</p>
<p>Now there is a distinctive problem with this setup though. For as simple and cheap this setup is, it doesn’t really reduce PVS as much as it optimally would. Leaf 1, for example can still see these leaves; 2, 3, 4, 5, and 7. And traveling just south into leaf 2 results in all leaves being drawn at once.</p>
<p>Therefore, the next thing we need to do is reduce visibility.</p>
<p>As most mappers will probably know, using a diagonal hint brush on a corner does a great job of reducing visibility. One hall cannot see the other, and all of that. We have some 'corner’s here, so it might be worthwhile to treat them as such.</p>
<p>The only drawback to this world setup is that it will force me to use an additional hint brush. It is impossible to make any concave shapes, so that limits the options. With that in mind, we can try something like this:</p>
<p><img src="../../uploads/default/original/3X/7/3/73da439f4bc9932447e0b7d9f8b6db4bddb2ebef.png" alt="" data-base62-sha1="gwSxlD4GSllqugmZLhzFx5ipGV1" width="300" height="300"></p>
<p>So let’s test this setup: what can leaf 1 see? Well, maybe a better approach would be to determine what it <span class="bbcode-i">can’t</span> see. So for starters it can’t see leaf 4, so that isn’t drawn. It also can’t see leaves 8, 9, 0 and A. This is a very significant improvement, because there is much less being drawn that, from the beginning, did not need to be drawn.</p>
<p>The only issue at the moment is that leaf 6 can see everything. We need to somehow cut that in half. Let’s see if this works?</p>
<p><img src="../../uploads/default/original/3X/c/f/cf005e8104b0e38a4ee5b34111a08bbf7a9c3d90.png" alt="" data-base62-sha1="txdCTkiaW5WysSw6ud8AJTSSCJ2" width="300" height="300"></p>
<p>Okay, so this works. We have a little more wiggle room for what is visible and what it not. But we’ve just spent and entire 6 brushsides on it. There has to be a better way. What if we extended those diagonals? Can that be done with just two brushes?</p>
<p><img src="../../uploads/default/original/3X/9/3/93b2546ec93b414f52b3997a094d004e3c2f3f0d.png" alt="" data-base62-sha1="l4AfZQeEAEfRQ4uCpnJ5rdQrJX7" width="300" height="300"></p>
<p>Yes we can. Leaf 6 cannot see leaves 1, 3, 0, and A. PVS is small now. We have greatly reduced the amount of level that is being drawn at any given time. That’s<span class="bbcode-i"> fantastic</span>, and hopefully the game should be faster.</p>
<p>So now one problem remains. There’s now quite a few visleaves in this setup. We need to reduce this somehow, and we have to do it without increasing our brush count and increasing our PVS.</p>
<p>The first thing we should ask is at what point would a tunnel be able to see the tunnel diagonally from it? The answer is to draw a line. We can do something like this, for example.</p>
<p><img src="../../uploads/default/original/3X/f/b/fb947514acedb0d86bbe04fabe0d8e5766141482.png" alt="" data-base62-sha1="zTzUDq8JkvjfIIHxcOpSwtIqPPc" width="300" height="300"></p>
<p>Still treating the setup as having corners, this fulfills the PVS directive as leaf 2 cannot see leaves 4, 5, or 6. The same also holds true for what leaf 6 can see. We can perform a similar relationship for 1 and 5.</p>
<p><img src="../../uploads/default/original/3X/d/7/d75d3b3d742d16cb5fc953f734474d42e70963d0.png" alt="" data-base62-sha1="uJcp16Btnsyj5NYUg9sWqMGGJdC" width="300" height="300"></p>
<p>We finally arrive at a visleaf setup that follows all directives. The PVS is very limited in this setup, the leafs that result are simple and few, and we’ve done all this using as few brushes as possible. We cannot possibly improve this in terms of function.</p>
<p>But can we make it prettier?</p>
<p><img src="../../uploads/default/original/3X/d/e/de6fbdb53ee295c9d4060c754931726ba8c91720.png" alt="" data-base62-sha1="vJLoXjNdMbxClPdTl35XxloDLB6" width="300" height="300"></p>
<p>A mapper can dream…</p>
        </div>

        <meta itemprop='headline' content='[Tutorial] - Advanced hint brushes'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Pixelblast Media LLC'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/2X/b/b4f2bc6e5e04e842eae8b788313c606f873a973b.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/dky.tehkingd.html'><span itemprop='name'>dky.tehkingd.u</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="12262.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2013-04-15T21:32:37Z'>
              <time itemprop='dateModified' datetime='2018-11-25T03:23:35Z' class='post-time'>
                November 25, 2018,  3:23am
              </time>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>You should see the hint brush setup I have going in the Sprint-Jump room in the Hazard Course… pretty insane stuff.</p>
<p>“But why do you need hint brushes for a totally straight corridor?” One might ask.</p>
<p>Well it’s because of the vertical sections of the whole room. As mappers, it’s important for us to remember that Visleafs are three-dimensional volumes, and as such, it is also important to take into account optimization for vertical spaces as well as the horizontal ones that would normally be encountered with more common situations such as hallways.</p>
<p>Just thought I’d chip in.  <img src="../../images/emoji/twitter/winkc164.png?v=9" title=":wink:" class="emoji" alt=":wink:"></p>
        </div>

        <meta itemprop='headline' content='[Tutorial] - Advanced hint brushes'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../privacy.html' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    <div class="headerNotice">
    <div class="headerNoticeWrapper wrap">
        <p>Founded in 2004, Leakfree.org became one of the first online communities dedicated to Valve’s Source engine development. It is more famously known for the formation of Black Mesa: Source under the 'Leakfree Modification Team' handle in September 2004.</p>
    </div>
</div>
    
  </body>
  

<!-- Mirrored from leakfree.org/t/tutorial-advanced-hint-brushes/12262 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 18 Jan 2021 10:43:58 GMT -->
</html>
